<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.550">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Oliver Saal">
<meta name="dcterms.date" content="2023-04-13">
<meta name="description" content="HSL käsittää itsensä ensisijaisesti taloudellisesti tuottavana toimijana. Todellisuudessa he tuottavat julkista peruspalvelua, ei sijoitustoimintaa.">

<title>Oliver Saal - Julkinen liikenne on peruspalvelu, ei sijoituskohde</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/cookie-consent/cookie-consent.js"></script>
<link href="../site_libs/cookie-consent/cookie-consent.css" rel="stylesheet">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

<script type="text/javascript" charset="UTF-8">
document.addEventListener('DOMContentLoaded', function () {
cookieconsent.run({
  "notice_banner_type":"simple",
  "consent_type":"express",
  "palette":"light",
  "language":"en",
  "page_load_consent_levels":["strictly-necessary"],
  "notice_banner_reject_button_hide":false,
  "preferences_center_close_button_hide":false,
  "website_name":""
  ,
"language":"en"
  });
});
</script> 
  


<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">Oliver Saal</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../index.html"> 
<span class="menu-text">Me</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../research.html"> 
<span class="menu-text">Research</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../teaching.html"> 
<span class="menu-text">Teaching</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../resources.html"> 
<span class="menu-text">Resources</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../blog.html"> 
<span class="menu-text">Thinking Out Loud</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/ollisaal"> <i class="bi bi-twitter" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/osaal"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="mailto:oliver.saal@proton.me"> <i class="bi bi-envelope" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#new-public-managament-ja-numeroiden-ylivalta" id="toc-new-public-managament-ja-numeroiden-ylivalta" class="nav-link active" data-scroll-target="#new-public-managament-ja-numeroiden-ylivalta">New Public Managament ja numeroiden ylivalta</a></li>
  <li><a href="#tuottavuuden-ideologia-toiminnan-peruspilarina" id="toc-tuottavuuden-ideologia-toiminnan-peruspilarina" class="nav-link" data-scroll-target="#tuottavuuden-ideologia-toiminnan-peruspilarina">Tuottavuuden ideologia toiminnan peruspilarina</a></li>
  <li><a href="#julkinen-liikenne-on-peruspalvelu" id="toc-julkinen-liikenne-on-peruspalvelu" class="nav-link" data-scroll-target="#julkinen-liikenne-on-peruspalvelu">Julkinen liikenne on peruspalvelu</a></li>
  <li><a href="#tuottavuus-pois-yhtälöstä" id="toc-tuottavuus-pois-yhtälöstä" class="nav-link" data-scroll-target="#tuottavuus-pois-yhtälöstä">Tuottavuus pois yhtälöstä</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content page-columns page-full" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Julkinen liikenne on peruspalvelu, ei sijoituskohde</h1>
  <div class="quarto-categories">
    <div class="quarto-category">public transportation</div>
    <div class="quarto-category">city planning</div>
    <div class="quarto-category">new public management</div>
    <div class="quarto-category">finnish</div>
  </div>
  </div>

<div>
  <div class="description">
    HSL käsittää itsensä ensisijaisesti taloudellisesti tuottavana toimijana. Todellisuudessa he tuottavat julkista peruspalvelua, ei sijoitustoimintaa.
  </div>
</div>


<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Oliver Saal </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">April 13, 2023</p>
    </div>
  </div>
  
    <div>
    <div class="quarto-title-meta-heading">Modified</div>
    <div class="quarto-title-meta-contents">
      <p class="date-modified">April 13, 2023</p>
    </div>
  </div>
    
  </div>
  


</header>


<p>Svenska Yle julkaisi tänään, 13. huhtikuuta, <a href="https://svenska.yle.fi/a/7-10031514">erinomaisen jutun</a>, jossa he haastattelivat HSL-alueella aktiivisesti valelipuilla matkustavia henkilöitä. Jutun päähaastateltava kertoo miten hän on liittynyt ryhmään, jossa kaikki ryhmäläiset - neljäkymmentä henkilöä yhteensä - jakavat tarkastusmaksut keskenään jos he jäävät kiinni.</p>
<p>Artikkeli on kokonaisuudessaan erittäin kiinnostava, mutta eräs sitaatti päähaastateltavalta osui silmään:</p>
<div class="page-columns page-full"><blockquote class="blockquote">
<p>Kyseessä ei ole rahan säästäminen, vaan unelmoiminen järjestelmästä jossa matkustajien eivät tarvitse perustaa tällaista ryhmää. Järjestelmä, jossa julkinen liikenne keskittyy matkustajiin eikä siihen, kuinka paljon rahaa HSL tienaa järjestelmällä.<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a></p>
</blockquote><div class="no-row-height column-margin column-container"><p><sup>1</sup>&nbsp;Svenska Yle, 13.4.2023, kirjoittajan kääntämä. Saatavilla: https://svenska.yle.fi/a/7-10031514. Haettu 13.4.2023.</p></div></div>
<p>Samaan aikaan HSL:n lipuntarkastusyksikön edustaja Satu Koskinen toteaa haastattelussa, että liputta matkustavien “ideologia on ristiriitainen, tuollaisella toiminnalla edistetään hintojen nousua”.<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a></p>
<div class="no-row-height column-margin column-container"><p><sup>2</sup>&nbsp;Svenska Yle, 13.4.2023, kirjoittajan kääntämä. Saatavilla: https://svenska.yle.fi/a/7-10031514. Haettu 13.4.2023.</p></div><p>Mikä minua hieroo tässä keskustelussa, on HSL:n edustama talousajattelu. Lippuhintojen nousu nähdään tässä passiivisena välttämättömyytenä - hinta nousee itsestään eikä kukaan voi asialle mitään. Näinhän ei todellisuudessa ole: hinnat <em>nostetaan</em>, eli joku toimija tekee päätöksen nostaa hintoja tietyn logiikan mukaan.</p>
<section id="new-public-managament-ja-numeroiden-ylivalta" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="new-public-managament-ja-numeroiden-ylivalta">New Public Managament ja numeroiden ylivalta</h2>
<p>HSL edustaa näkemyksellään uuden julkishallinnon ajattelutapaa, englanniksi <em>new public management</em> (NPM). Nimestään huolimatta ajattelutapa ei ole hirveän uusi, tietyissä muodoissa NPM on ollut olemassa 1980-luvulta lähtien. Ajattelutavassa keskiössä on asiakas, ei ihminen: julkishallintoa tulisi johtaa yrityksen tapaisesti, johon kuuluu asiakkuuslähtöisyys, tulosvastuut, taloustehokkuus ja niin edelleen.</p>
<p>Otetaan esimerkkinä HSL:n vuosien 2022-2025 strategia: “Asiakkuuksista kestävään kasvuun”.<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a> Strategiassa todetaan neljä tavoitetta vuodelle 2025: päästöttömyys, ennätyskäyttömäärät, kustannustehokkuus ja talouden tasapaino. Onkin huomattavaa, ettei yksikään näistä koske käyttökokemusta!</p>
<div class="no-row-height column-margin column-container"><p><sup>3</sup>&nbsp;HSL, ei pvm. “Strategia 2022-2025”. Saatavilla: https://www.hsl.fi/hsl/hsl-organisaationa/strategia-2022-2025. Haettu 13.4.2023.</p></div><p>Osallistuin noin kolme viikkoa sitten tieteellisen Sosiologipäivät 2023-konferenssin kvantifioinnin sosiologian työryhmään. Siellä keskusteltiin paljon siitä, millaista valtaa ja mahtia numeroilla on nyky-talouskeskeisessä-yhteiskunnassamme. HSL:n strategia on loistava esimerkki tästä: puhutaan 90 prosenttin päästövähennyksistä, 400 miljoonan käyttäjämääristä, 0,25 euron matkustajakilometrihinnasta - mutta missään ei mainita että matkustajat olisivat tyytyväisiä, että toiminta olisi sosiaalisesti kestävää, että estettäisiin kaupunkieriytymistä.</p>
</section>
<section id="tuottavuuden-ideologia-toiminnan-peruspilarina" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="tuottavuuden-ideologia-toiminnan-peruspilarina">Tuottavuuden ideologia toiminnan peruspilarina</h2>
<p>HSL on kuntayhtymä, jossa useampi kunta on yhdessä allekirjoittanut sopimuksen julkisliikenteen tuotosta. HSL:n perussopimuksen yhdeksännessä artiklassa todetaankin yhtymän toimintaperiaatteet.<a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a> Niitä on kahdeksan kappaletta, kuta kuinkin:</p>
<div class="no-row-height column-margin column-container"><p><sup>4</sup>&nbsp;Helsingin seudun liikenne-kuntayhtymä, 2018. “Perussopimus”. Saatavilla: https://hslfi.azureedge.net/globalassets/hsl/paatoksenteko/hsl_perussopimus.pdf. Haettu 13.4.2023.</p></div><ol type="1">
<li>Asiakaslähtöisyys ja käyttäjien ja kuntien vuorovaikutus.</li>
<li>Toiminnallisten ja taloudellisten tavoitteiden saavuttaminen.</li>
<li>Tasapainoinen talous</li>
<li>Hallituksen vastuulla oleva sisäinen valvonta</li>
<li>Riskiselvitysten tuottaminen, “etteivät niiden kustannukset aiheuta häiriötä kuntayhtymän toiminnalle <em>ja rahoitukselle</em>” (kursiivi lisätty)</li>
<li>Rahallisesti tuottava rahoitus- ja sijoitustoiminta</li>
<li>Vieraan pääoman välttäminen</li>
<li>Mahdollisimman vähäinen pääoman käyttö</li>
</ol>
<p>Näissä toistuu taas rahallisuus, taloustehokkuus ja talouskontrolli - mutta ei ihmiskeskeisyys. Ainoana ei-rahallisena pisteenä voidaankin nähdä ensimmäinen, “asiakaslähtöisyys”, joka kuitenkin peilaa asiakaskeskeisyyttä. HSL:n käyttäjä on asiakas, ei kuntalainen.</p>
<p>Ei siis ole ihme, että HSL suhtautuu nuivasti valelipuilla matkustaviin - niiden päätehtävänähän on olla taloudellisesti kannattava ja kestävä! HSL:n nykyisenä tehtävänä <em>ei</em> ole tuottaa sosiaalisesti kestävää julkisliikennettä, vaan <em>taloudellisesti</em> kestävää liikennettä.</p>
<p>(Sivunoteerauksena: Minua kismii sana “joukkoliikenne”. Minne jää julkisen sektorin vastuu?)</p>
</section>
<section id="julkinen-liikenne-on-peruspalvelu" class="level2">
<h2 class="anchored" data-anchor-id="julkinen-liikenne-on-peruspalvelu">Julkinen liikenne on peruspalvelu</h2>
<p>Julkisliikenteen tehtävä ei, omasta mielestäni, ole tienata rahaa. Pääsääntöisesti (ja tietysti monien eri asteriskien ja poikkeuksien kanssa) julkisen sektorin tulee tuottaa ne palvelut, jotka ovat taloudellisesti kannattamattomia mutta elintärkeitä yhteiskunnan toiminnan ja yhdenvertaisuuden kannalta. Julkinen liikenne on tällainen.</p>
<p>Miksi sitten julkista liikennettä kohdellaan taloudellisesti tasapainoitettavana sijoituskohteena? Vastaus löytynee NPM-ideologiasta. Suosittu argumentti julkisen sektorin pienentämiselle on sen tehottomuus - yksityiset markkinat nyt vain tuottavat tehokkaammin, koska siellä kilpaillaan kunnolla. Tällä logiikalla on varmasti katsottu, että julkisesti tuotettu joukkoliikenne on tehotonta toimintaa, jossa pyöritellään peukaloita ja ajetaan ani harva linja-autovuoro.</p>
<p>Julkisen liikenteen tehtävä ei kuitenkaan ole tienata rahaa, vaan mahdollistaa kansalaisten vapaan liikkuvuuden ja vapaan asutuksen oikeuksien todellisen toteutumisen. Julkinen liikenne varmistaa, että vähävaraiset henkilöt pääsevät töihin, vapaa-ajan viettoon, kulttuurin pariin - että he pääsevät liikkumaan kaikkialla kaupungissa. Jos julkisin varoin tuotetaan kaupunkeja, rakennettua ympäristöä, kulttuuria ja koulutusta, miksi niiden etuoville pääsy olisi kiinni yksityisestä rahasta?</p>
</section>
<section id="tuottavuus-pois-yhtälöstä" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="tuottavuus-pois-yhtälöstä">Tuottavuus pois yhtälöstä</h2>
<p>Ehdottaisin siksi, että HSL:n toimintaperiaatteisiin tulisi tehdä radikaaleja muutoksia. HSL:lle - niin kuin kaikille muille julkisliikenteen tuottajille - tulisi suoda mahdollisuus, jopa odotus, olla taloudellisesti <em>tappiollisia</em>. Julkinen liikenne ei ole sijoitustoimintaa, vaan elintärkeää yhteiskunnan perustoimintaa. Emme edellytä tieverkon olevan taloudellisesti kannattavaa toimintaa - miksi edellytämme sitä julkiselta liikenteelltä?</p>
<p>Toiseksi, julkisliikenteen rahoituskannan tulisi muuttua radikaalisti. Se on julkisesti tuotettua peruspalvelua, mitä ei tule rahoittaa yksityisellä rahalla. Lipuntulot tulisi pyrkiä nollaan, ei tasapainoon julkisen rahoituksen kanssa. HSL:n tavoitteena tulisi olla lipputulojen vähentäminen nollaan prosenttiin - ei kasvattaminen 400 miljoonaan euroon, niin kuin nykyinen strategia ehdottaisi. Tämä tarkoittaa suurempaa sitoutumista kuntayhtymän jäseniltä, ja näin pitääkin olla: julkinen liikenne on peruspalvelu, ei luksus- tai sijoitustuote.</p>
<p>HSL:n “Liputtomasti selityksiä”-kampanjan aikana moni Svenska Ylen lukija reagoi syyteeseen, että liputta matkustavat olisivat syypää HSL:n lippujen hintojen korotukseen.<a href="#fn5" class="footnote-ref" id="fnref5" role="doc-noteref"><sup>5</sup></a> Eräs haastateltava toteaa kuitenkin, että hänelle valinta on päivän aterioinnin ja julkisen liikenteen lipun välillä. Tämä ei ole sosiaalisesti kestävää toimintaa HSL:n kannalta. Lainatakseni HSL:n edustajan kommentteja: Jos HSL jatkaa taloudellista linjaansa, heidän ideologiansa on ristiriidassa omien tavoitteidensa kanssa. HSL aiheuttaa itselleen lippuvilppiä ja matkustajakatoa, mikä itsessään pahentaa taloudellista tilannetta - niin kuin moni rahaideologisessa ajattelutavassa, noidankehä on melkein taattu.</p>


<div class="no-row-height column-margin column-container"><p><sup>5</sup>&nbsp;Svenska Yle, 17.2.2023. Saatavilla: https://svenska.yle.fi/a/7-10028654. Haettu 13.4.2023.</p></div></section>


<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" id="quarto-citation"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{saal2023,
  author = {Saal, Oliver},
  title = {Julkinen liikenne on peruspalvelu, ei sijoituskohde},
  date = {2023-04-13},
  url = {https://osaal.github.io/posts/hsljatulosvastuu.html},
  langid = {fi}
}
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-saal2023" class="csl-entry quarto-appendix-citeas" role="listitem">
Saal, Oliver. 2023. <span>“Julkinen liikenne on peruspalvelu, ei
sijoituskohde.”</span> April 13, 2023. <a href="https://osaal.github.io/posts/hsljatulosvastuu.html">https://osaal.github.io/posts/hsljatulosvastuu.html</a>.
</div></div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">

<div class="cookie-consent-footer"><a href="#" id="open_preferences_center">Cookie Preferences</a></div></div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>




</body></html>